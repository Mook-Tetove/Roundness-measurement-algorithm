# Roundness-measurement-algorithm
A roundness measurement algorithm program based on single-point laser traversal ranging (based on C language) 
一种基于单点激光遍历测距的圆度测量算法程序（基于C语言）包括软件和硬件模型的设计

这个程序是一个圆度测量系统，它使用激光测距仪和旋转机械臂来获取物体的内外径数据，并通过最小二乘法拟合出一个圆，计算出拟合圆的半径以及测量点的最大、最小半径。以下是该系统的详细说明：
## 系统组成
机械结构
可 360 度旋转的机械臂
固定在机械臂上的激光测距仪
旋转驱动电机（需支持精确角度控制）
##硬件接口
电机控制接口（如步进电机驱动器）
激光测距仪数据采集接口
微控制器或计算机平台运行本程序
##软件功能
控制电机完成 360 度旋转
在每个角度位置采集激光测距数据
计算内径数据
坐标转换与圆拟合算法
计算并输出圆度分析结果
电机控制与数据采集
目前程序中缺少电机控制和自动数据采集部分，以下是需要补充的关键功能：
##电机控制模块
初始化电机驱动器
设置旋转角度分辨率（例如每度一个测量点）
控制电机按指定角度步进旋转
提供角度位置反馈
数据采集流程
1. 初始化系统
2. 设置测量参数（臂长、测量点数等）
3. 将机械臂移动到起始位置
4. 循环360次（每次旋转1度）：
   a. 发送电机旋转命令
   b. 等待电机稳定
   c. 读取激光测距仪数据
   d. 存储当前角度和测量数据
5. 完成测量，回到起始位置
6. 进行数据处理和分析

##使用说明
系统连接
将激光测距仪连接到数据采集接口
将电机驱动器连接到控制接口
确保系统供电稳定
参数设置
修改程序中的测量参数（如测量点数、角度分辨率）
输入机械臂长度（程序中的Rceliangbi）
运行程序
编译并运行程序
程序会提示输入机械臂长度
程序将控制电机旋转并采集数据
最终输出拟合圆半径和测量点的最大 / 最小半径


##注意事项
程序中的 GPIO 引脚定义需要根据实际硬件连接进行修改
步进电机控制参数（如细分数、步进脉冲频率）需要根据实际电机和驱动器调整
激光测距仪数据读取函数需要根据实际设备接口协议实现
电机旋转时需要确保机械结构安全，避免碰撞
在实际应用中，可能需要增加滤波算法处理测量噪声
圆拟合算法中的数学公式可能需要根据具体应用场景调整
以上是该圆度测量系统的详细说明和改进建议。根据实际硬件平台和设备接口，你可能需要进一步修改代码以实现完整功能。
